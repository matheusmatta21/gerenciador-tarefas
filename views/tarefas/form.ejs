<div class="form-container">
  <form method="post" class="form">
    <div class="form-group">
      <label for="titulo">Título*</label>
      <input id="titulo" name="titulo" type="text" value="<%= tarefa.titulo || '' %>" required>
      <% if (errors.titulo) { %><span class="error"><%= errors.titulo.msg %></span><% } %>
    </div>

    <div class="form-group">
      <label for="status">Status*</label>
      <select id="status" name="status" required>
        <option value="pendente" <%= tarefa.status === 'pendente' ? 'selected' : '' %>>Pendente</option>
        <option value="em_progresso" <%= tarefa.status === 'em_progresso' ? 'selected' : '' %>>Em Progresso</option>
        <option value="concluida" <%= tarefa.status === 'concluida' ? 'selected' : '' %>>Concluída</option>
      </select>
      <% if (errors.status) { %><span class="error"><%= errors.status.msg %></span><% } %>
    </div>

    <div class="form-group">
      <label for="prioridade">Prioridade*</label>
      <select id="prioridade" name="prioridade" required>
        <option value="baixa" <%= tarefa.prioridade === 'baixa' ? 'selected' : '' %>>Baixa</option>
        <option value="média" <%= tarefa.prioridade === 'média' ? 'selected' : '' %>>Média</option>
        <option value="alta" <%= tarefa.prioridade === 'alta' ? 'selected' : '' %>>Alta</option>
      </select>
      <% if (errors.prioridade) { %><span class="error"><%= errors.prioridade.msg %></span><% } %>
    </div>

    <div class="form-group">
      <label for="prazo">Prazo*</label>
      <input id="prazo" name="prazo" type="date" value="<%= tarefa.prazo ? tarefa.prazo.toISOString().split('T')[0] : '' %>" required>
      <% if (errors.prazo) { %><span class="error"><%= errors.prazo.msg %></span><% } %>
    </div>

    <% if (errors.geral) { %><div class="alert alert-error"><%= errors.geral.msg %></div><% } %>

    <button type="submit" class="btn btn-primary">
      <%= tarefa.id ? 'Atualizar' : 'Criar' %> Tarefa
    </button>
    <a href="/tarefas/<%= projeto.id %>/lista" class="btn btn-secondary">Cancelar</a>
  </form>
</div>